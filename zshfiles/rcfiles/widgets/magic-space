# vim: filetype=zsh

# magic-space changes behavior based on LBUFFER

__fasd_fzy() {
	cd $(fasd_cd -d | sort -n -r | awk '{print $2}' | fzy)
	LBUFFER=
	zle reset-prompt
}

__git_checkout_fzy() {
	git checkout $(git branch -a | fzy)
	LBUFFER=
	zle reset-prompt
}

__vim_fzy() {
	file=$(find . | fzy)
	LBUFFER="v ${file}"
	zle reset-prompt
	zle accept-line
}

case "${LBUFFER}" in
	j)
		__fasd_fzy
		;;
	gco)
		__git_checkout_fzy
		;;
	v)
		__vim_fzy
		;;
	*)
		zle self-insert
esac
