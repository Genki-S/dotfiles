# TODO: Remove dotfiles/zshfiles.old altogether once the new dotfiles/zshfiles is fully setup

rcfiles=(
  prompt.zsh
  history.zsh
  zle.zsh
  completion.zsh
  hooks.zsh
  git.zsh
  nvim.zsh
  k8s.zsh
)
for f in $rcfiles
do
  source $HOME/dotfiles/zshfiles/rcfiles/$f
done

# Misc. {{{

# Regard some characters as word stops (better backword-kill-word behavior)
WORDCHARS=$(echo $WORDCHARS | fold -w 1 | grep -v '/' | grep -v '-' | grep -v '=' | grep -v '.' | paste -s -d' ' | sed 's/ //g')

setopt auto_pushd

alias org='tmux rename-window org; ORGMODE=1 emacs -nw ~/org/dashboard.org'

# }}}

# Plugins {{{
eval "$(fasd --init auto)"
eval "$(direnv hook zsh)"

# Syntax highlighting from https://github.com/zsh-users/zsh-syntax-highlighting
source $HOME/dotfiles/submodules/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

# Easy history search from https://github.com/zsh-users/zsh-history-substring-search
source $HOME/dotfiles/submodules/zsh-history-substring-search/zsh-history-substring-search.zsh
bindkey -M emacs '^P' history-substring-search-up
bindkey -M emacs '^N' history-substring-search-down

# Fish-like auto suggestions from https://github.com/zsh-users/zsh-autosuggestions
source $HOME/dotfiles/submodules/zsh-autosuggestions/zsh-autosuggestions.zsh
# to see all colors: for code in {000..255}; do print -P -- "$code: %F{$code}Test%f"; done
ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE="fg=241"
# let my custom widgets also clear the autosuggest
ZSH_AUTOSUGGEST_CLEAR_WIDGETS+=(
  expand-alias-and-accept
)

# More completions from https://github.com/zsh-users/zsh-completions
fpath+=($HOME/dotfiles/submodules/zsh-completions/src)

# diff-so-fancy: https://github.com/so-fancy/diff-so-fancy
alias diff-so-fancy="$HOME/dotfiles/submodules/diff-so-fancy/diff-so-fancy"

# }}}

# Load local zshrc
[ -f $HOME/.zshrc.local ] && source $HOME/.zshrc.local

autoload -Uz compinit
compinit

# vim:foldmethod=marker
